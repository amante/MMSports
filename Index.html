<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MMSports v1.4.0-merged ‚Äî Carrusel Mejorado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%230ea5e9'/%3E%3Ctext x='50' y='58' font-size='48' text-anchor='middle' fill='white' font-family='Arial'%3EM%3C/text%3E%3C/svg%3E"/>
  <style>
    .confetti { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; overflow:hidden; }
    .confetti span { position:absolute; top:-10px; font-size:18px; animation: fall 3s linear forwards; }
    @keyframes fall {
      0% { transform: translateY(-10px) rotate(0deg); opacity:1; }
      100% { transform: translateY(110vh) rotate(360deg); opacity:0.2; }
    }
    .card { break-inside: avoid; }
    .dot { width:10px; height:10px; border-radius:9999px; border:1px solid rgb(203,213,225); }
    .dot.active { background: rgb(59,130,246); border-color: rgb(59,130,246); }
    @media print {
      #topbar, #controls, #playerSearch, #toast, #warnPanel, #footerActions { display:none !important; }
      body { background:white; }
      .card { page-break-inside: avoid; break-inside: avoid; }
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
  <header id="topbar" class="sticky top-0 z-20 bg-white/90 backdrop-blur border-b border-slate-200">
    <div class="max-w-7xl mx-auto px-4 py-3 flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-full bg-sky-500 text-white grid place-items-center font-bold">M</div>
        <div>
          <h1 class="text-xl font-semibold">MMSports <span class="text-xs align-top text-slate-500">v1.4.0-merged</span></h1>
          <p class="text-xs text-slate-500 -mt-1">Carrusel con autoplay, paginaci√≥n, teclado y gestos</p>
        </div>
      </div>

      <div class="flex flex-wrap items-center gap-2">
        <label class="inline-flex items-center gap-2 px-3 py-2 border border-slate-300 rounded-xl bg-white hover:bg-slate-50 cursor-pointer">
          <input id="fileInput" type="file" accept=".xlsx,.xls,.csv" class="hidden">
          <span class="w-5 h-5">üì§</span>
          <span class="text-sm">Cargar Excel/CSV</span>
        </label>
        <button id="btnExport" class="px-3 py-2 border border-slate-300 rounded-xl bg-white hover:bg-slate-50 text-sm">Exportar estado</button>
        <button id="btnImport" class="px-3 py-2 border border-slate-300 rounded-xl bg-white hover:bg-slate-50 text-sm">Importar estado</button>
        <button id="btnClear" class="px-3 py-2 border border-rose-200 text-rose-700 rounded-xl bg-rose-50 hover:bg-rose-100 text-sm">Borrar estado</button>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 pb-20">
    <section id="dropzone" class="mt-6 p-6 border-2 border-dashed border-slate-300 rounded-2xl bg-white text-center text-slate-500">
      Arrastra aqu√≠ tu archivo <strong>.xlsx</strong> / <strong>.csv</strong> con <em>Cartillas</em> y opcionalmente <em>Jugadores</em>.
    </section>

    <section id="controls" class="mt-8 grid grid-cols-1 lg:grid-cols-4 gap-6">
      <div class="lg:col-span-3">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-lg font-semibold">Carrusel de cartillas</h2>
          <div class="flex items-center gap-2 text-xs text-slate-600">
            <span id="carouselStatus" aria-live="polite">Sin cartillas</span>
          </div>
        </div>

        <!-- Carousel Toolbar -->
        <div class="flex flex-wrap items-center gap-2 mb-3">
          <button id="prevBtn" class="px-2 py-1 rounded-lg bg-white border border-slate-200 hover:bg-slate-50">‚óÄ</button>
          <button id="nextBtn" class="px-2 py-1 rounded-lg bg-white border border-slate-200 hover:bg-slate-50">‚ñ∂</button>

          <button id="playPause" class="px-3 py-1 rounded-lg bg-white border border-slate-200 hover:bg-slate-50">Reproducir</button>
          <label class="text-xs flex items-center gap-1">
            Velocidad:
            <select id="speedSel" class="border border-slate-300 rounded-lg px-2 py-1 text-xs">
              <option value="3000">3s</option>
              <option value="6000" selected>6s</option>
              <option value="10000">10s</option>
            </select>
          </label>

          <label class="text-xs flex items-center gap-1 ml-auto">
            Ir a:
            <select id="gotoSel" class="border border-slate-300 rounded-lg px-2 py-1 text-xs">
              <option value="">‚Äî</option>
            </select>
          </label>
        </div>

        <div id="carouselWrap" class="relative bg-white border border-slate-200 rounded-2xl p-4 overflow-hidden">
          <div id="carousel" class="flex transition-transform duration-500 ease-out will-change-transform"></div>
          <div class="mt-3 flex items-center justify-center gap-2" id="dots"></div>
        </div>
        <p class="mt-2 text-xs text-slate-500">Consejos: usa ‚Üê ‚Üí para navegar, <kbd>Espacio</kbd> para Play/Pause, <kbd>Home</kbd>/<kbd>End</kbd> para ir al inicio/fin. Swipe en m√≥vil.</p>
      </div>

      <div class="lg:col-span-1">
        <h2 class="text-lg font-semibold mb-3">Jugadores</h2>
        <input id="playerSearch" class="w-full mb-3 px-3 py-2 border border-slate-300 rounded-xl" placeholder="Buscar jugador..." />
        <div class="bg-white border border-slate-200 rounded-2xl overflow-hidden">
          <table class="min-w-full text-sm">
            <thead class="bg-slate-50">
              <tr>
                <th class="text-left px-3 py-2">Jugador</th>
                <th class="text-left px-3 py-2">Estad√≠stica</th>
                <th class="text-right px-3 py-2">Valor</th>
              </tr>
            </thead>
            <tbody id="playersTable"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="mt-10">
      <h2 class="text-lg font-semibold mb-3">Resumen</h2>
      <div id="summary" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"></div>
    </section>

    <section id="footerActions" class="mt-10 text-xs text-slate-500">
      Build 2025-10-13 ‚Äî MMSports v1.4.0-merged
    </section>
  </main>

  <div id="confetti" class="confetti"></div>

  <footer class="border-t border-slate-200 py-6 text-center text-xs text-slate-500">
    ¬© 2025 MMSports. Persistencia local. Sin servidor.
  </footer>

  <script src="./app.js"></script>
</body>
</html>
